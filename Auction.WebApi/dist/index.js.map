{"version":3,"sources":["../index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["var host = {\n    node: 'http://52.30.47.67:6869', // 'https://testnet.wavesexplorer.com/',\n    matcher: 'http://52.30.47.67:6869'  // 'https://testnet.wavesexplorer.com/matcher'\n};\n\nWavesAPI.TESTNET_CONFIG.nodeAddress = host.node;\nWavesAPI.TESTNET_CONFIG.matcherAddress = host.matcher;\n\nconst Waves = WavesAPI.create(WavesAPI.TESTNET_CONFIG);\n\nvar factor = 10000000;\nvar api = 'https://b4b76b19.ngrok.io';\nvar getUsersUrl = api + '/Auction/users ';\nvar getLotsUrl = api + '/Auction/lots';\nvar makeaBetUrl = api + '/Auction/bets';\n\nangular.module('app', [])\n    .controller('appController', function ($scope, $http, $timeout) {\n\n        let user = waves.auth('segment monitor opinion fly erode true federal slow found pill laugh proud infant picnic scan');\n// 3N79JuKD2Eni2pxCeUEx7GEdrovncn3u8j5\n\n        let auction = waves.auth('banana note sea analyst room holiday shift armor crew easy pizza dad engage nest pioneer');\n// 3NACVraZj4t7DytjMmz64QgSmGDKMmdrt1x\n\n        waves.list(user, ['DuySf5DBeTu7aXxE9LdeD7Rrzo7qqpC4bYhFRb25qXFP', 'DFkVwVCHvFWN386t572ghJroJMck6fy8qdMxTsc7mz8c', '7ouiXv69bYHFvexXhQudxGEBdFyrNuFMvb9ZcK1vFXY6', 'Dnfvyuv1vA72TAkji5FpLe5z4rvKAjCBscMjhhHPK8Yn'])\n            .then(data => console.log('list', data));\n\n        $scope.activeUser = null;\n        $scope.makeaBet = makeaBet;\n        $scope.setActiveUser = setActiveUser;\n        $scope.getUserBalanceAndName = getUserBalanceAndName;\n\n        $http.get(getUsersUrl).then(function (items) {\n            $scope.users = items.data.map(function (item) {\n                return {\n                    id: item.Id,\n                    name: item.Name,\n                    wallet: waves.auth(item.Wallet)\n                }\n            });\n            setActiveUser($scope.users[0]);\n        });\n\n        $http.get(getLotsUrl).then(function (items) {\n            $scope.items = items.data.map(function (item) {\n                return {\n                    id: item.Id,\n                    img: item.Picture,\n                    title: item.Title\n                }\n            });\n        });\n\n        function getUserBalance(user) {\n            return waves.balance(user.wallet);\n        }\n\n        function makeaBet(amount, lotId) {\n            $scope.loading = true;\n            if ($scope.activeUser.balance > 0) {\n                waves.transfer(amount * factor, $scope.activeUser.wallet, auction)\n                    .then(transaction => {\n                        console.log('ok', transaction);\n                        return callApi(amount, lotId, transaction);\n                    })\n                    .catch(data => console.log('no', data))\n                    .then(() => {\n                        $scope.loading = false;\n                    });\n\n                function callApi(amount, lotId, transaction) {\n                    return $http.post(makeaBetUrl, {\n                        BetOwner: $scope.activeUser.id,\n                        Amount: amount || 10,\n                        Lot: lotId,\n                        TransactionId: transaction.id\n                    }).then(function () {\n                        $scope.betAdded = true;\n                        $timeout(function () {\n                            $scope.betAdded = false;\n                        }, 3000)\n                    }).catch(function (error) {\n                        console.log(error);\n                    })\n                }\n            }\n\n        }\n\n        function setActiveUser(user) {\n            $scope.activeUser = user;\n\n            getUserBalance($scope.activeUser).then((value) => {\n                $timeout(() => {\n                    $scope.activeUser.balance = value\n                }, 0);\n            })\n\n        }\n\n        function getUserBalanceAndName(user) {\n            return user.balance !== undefined ? user.name + ' Баланс: ' + user.balance : user.name;\n        }\n    });"]}